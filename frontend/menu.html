<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Smart Restaurant ‚Äî Menu</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #FF6F61;
      --secondary: #D4AF37;
      --light-bg: #FFF5F0;
      --card-bg: #ffffff;
    }
    * { box-sizing: border-box; margin:0; padding:0; }
    body { font-family: 'Roboto', sans-serif; background: var(--light-bg); color:#333; }

    .header { display:flex; justify-content:space-between; align-items:center; padding:20px 40px; background:#fff; box-shadow:0 3px 10px rgba(0,0,0,0.1); position:sticky; top:0; z-index:1000;}
    .brand { font-family: 'Playfair Display', serif; font-size:1.8rem; color:var(--secondary);}
    .nav button { margin-left:15px; padding:8px 14px; border:none; background:var(--primary); color:#fff; border-radius:6px; cursor:pointer; font-weight:500; transition:0.3s;}
    .nav button:hover { background:var(--secondary); }

    .hero { position:relative; width:100%; height:400px; overflow:hidden; margin-bottom:40px;}
    .slides { display:flex; transition:transform 0.5s ease-in-out; height:100%; }
    .slides img { width:100%; object-fit:cover; height:100%; }
    .overlay { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.3); display:flex; flex-direction:column; justify-content:center; align-items:center; color:#fff; text-align:center;}
    .overlay h1 { font-family:'Playfair Display', serif; font-size:3rem; margin-bottom:15px; }
    .overlay p { font-size:1.2rem; }
    .dots { position:absolute; bottom:15px; display:flex; gap:8px; justify-content:center; width:100%; }
    .dots .dot { width:12px; height:12px; border-radius:50%; background:#fff; opacity:0.5; cursor:pointer; transition:0.3s; }
    .dots .dot.active { opacity:1; background:var(--primary); }

    .section-header { text-align:center; font-family:'Playfair Display', serif; font-size:2.2rem; margin-bottom:30px; color:var(--secondary); }

    .category-nav { display:flex; justify-content:center; gap:20px; margin-bottom:40px; }
    .category-nav button { background:none; border:none; font-size:1.1rem; color:#555; cursor:pointer; padding:8px 12px; transition:color 0.3s; }
    .category-nav button.active, .category-nav button:hover { color:var(--primary); font-weight:600; }

    .menu-section { padding:0 20px 60px; display:none; }
    .menu-section.active { display:block; }
    .menu-section h3 { font-family:'Playfair Display', serif; font-size:1.8rem; color:var(--secondary); margin-bottom:25px; border-bottom:2px solid var(--primary); display:inline-block; padding-bottom:5px; }

    .menu-items { display:grid; grid-template-columns: repeat(auto-fit, minmax(250px,1fr)); gap:25px; }
    .menu-card { background:var(--card-bg); border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.08); overflow:hidden; transition: transform 0.3s, box-shadow 0.3s; display:flex; flex-direction:column; }
    .menu-card:hover { transform:translateY(-5px); box-shadow:0 15px 30px rgba(0,0,0,0.15);}
    .menu-card img { width:100%; height:180px; object-fit:cover; }
    .card-info { padding:15px; flex:1; display:flex; flex-direction:column; justify-content:space-between; }
    .card-info h4 { font-family:'Playfair Display', serif; font-size:1.3rem; margin-bottom:8px; color:#222; }
    .card-info p { font-size:1rem; color:#777; }
    .card-actions { display:flex; align-items:center; justify-content:space-between; padding:10px 15px; border-top:1px solid #eee; }
    .card-actions input { width:50px; padding:4px 6px; border-radius:4px; border:1px solid #ccc; }
    .card-actions button { background:var(--primary); border:none; color:#fff; padding:6px 12px; border-radius:6px; cursor:pointer; transition:0.3s; }
    .card-actions button:hover { background:var(--secondary); }

    .cart-float { position:fixed; bottom:20px; right:20px; background:var(--primary); color:#fff; padding:12px 18px; border-radius:50px; cursor:pointer; font-weight:600; box-shadow:0 6px 18px rgba(0,0,0,0.15);}
    .cart-panel { position:fixed; bottom:0; right:0; width:350px; max-height:80vh; background:#fff; border-top-left-radius:12px; border-top-right-radius:12px; box-shadow:0 -4px 20px rgba(0,0,0,0.15); transform:translateY(100%); transition:0.4s; overflow:auto; z-index:100;}
    .cart-panel.open { transform:translateY(0);}
    .cart-panel h3 { padding:15px; border-bottom:1px solid #eee; font-family:'Playfair Display', serif;}
    .cart-item { display:flex; padding:12px 15px; border-bottom:1px solid #eee; align-items:center; gap:10px; }
    .cart-item img { width:50px; height:50px; object-fit:cover; border-radius:6px; }
    .cart-item .meta { flex:1; }
    .cart-footer { display:flex; justify-content:space-between; align-items:center; padding:15px; border-top:1px solid #eee; }
    .cart-footer button { cursor:pointer; padding:6px 12px; border-radius:6px; border:none; color:#fff; font-weight:600; transition:0.3s; }
    .cart-footer #clearCartBtn { background:#ccc; color:#222; margin-right:10px;}
    .cart-footer #placeOrderBtn { background:var(--primary);}
  </style>
</head>
<body>

<div class="header">
  <div class="brand">Smart Restaurant</div>
  <div class="nav">
    <a href="index.html"><button>Home</button></a>
    <a href="checkout.html"><button>Checkout</button></a>
    <a href="tracking.html"><button>Order Tracking</button></a>
    <button id="logoutBtn">Logout</button>
    <button>Points: <span id="pointsDisplay">0</span></button>
  </div>
</div>

<div class="hero" id="hero">
  <div class="slides" id="slides">
    <img src="https://images.unsplash.com/photo-1604909053198-f9d782c94bdd?auto=format&fit=crop&w=1350&q=80" alt="Grilled Chicken">
    <img src="https://images.unsplash.com/photo-1600891964599-f61ba0e24092?auto=format&fit=crop&w=1350&q=80" alt="Pasta">
    <img src="https://images.unsplash.com/photo-1617196034715-df0b7ccba0d6?auto=format&fit=crop&w=1350&q=80" alt="Smoothie Drink">
    <img src="https://images.unsplash.com/photo-1612874748867-7ed59ef0a6c2?auto=format&fit=crop&w=1350&q=80" alt="Dessert Cake">
    <img src="https://images.unsplash.com/photo-1612874748870-0cf514b5fc3c?auto=format&fit=crop&w=1350&q=80" alt="Salad">
  </div>
  <div class="overlay">
    <h1>Delicious Food. Luxury Experience.</h1>
    <p>Smart Restaurant üç¥‚ú® . Where every bite sparks joy üòãüî•!</p>
  </div>
  <div class="dots" id="dots"></div>
</div>

<div class="section-header">Explore Our Menu</div>

<div class="category-nav" id="categoryNav">
  <button data-cat="main" class="active">Main Course</button>
  <button data-cat="drinks">Drinks</button>
  <button data-cat="desserts">Desserts</button>
</div>

<div class="menu-section active" id="section-main">
  <h3>Main Course</h3>
  <div class="menu-items" id="cat-main"></div>
</div>

<div class="menu-section" id="section-drinks">
  <h3>Drinks & Beverages</h3>
  <div class="menu-items" id="cat-drinks"></div>
</div>

<div class="menu-section" id="section-desserts">
  <h3>Desserts & Sweet Treats</h3>
  <div class="menu-items" id="cat-dessert"></div>
</div>

<div class="cart-float" id="cartFloat">Cart (<span id="cartCount">0</span>)</div>
<div class="cart-panel" id="cartPanel">
  <h3>Your Order</h3>
  <div id="cartList"></div>
  <div class="cart-footer">
    <button id="clearCartBtn">Clear</button>
    <button id="placeOrderBtn">Place Order</button>
    <strong id="cartTotal">Ksh 0</strong>
  </div>
</div>

<script>
const currentUsername = localStorage.getItem("currentUser");
if(!currentUsername){ alert("Please login!"); window.location.href="login.html"; }
let user = JSON.parse(localStorage.getItem(currentUsername)||'{}');
if(!user.points) user.points = 0;
document.getElementById("pointsDisplay").textContent = user.points;

document.getElementById("logoutBtn").onclick = ()=>{
  localStorage.removeItem("currentUser");
  window.location.href="login.html";
};

function addPoints(amount){
  user.points += amount;
  localStorage.setItem(currentUsername, JSON.stringify(user));
  document.getElementById("pointsDisplay").textContent = user.points;
}

// Hero slideshow
const slides=document.getElementById('slides');
const dotsContainer=document.getElementById('dots');
let idx=0;
for(let i=0;i<slides.children.length;i++){
  const dot=document.createElement('div'); dot.className='dot'; if(i===0) dot.classList.add('active');
  dot.onclick=()=>{ idx=i; updateHero(); };
  dotsContainer.appendChild(dot);
}
function updateHero(){
  slides.style.transform=`translateX(-${idx*100}%)`;
  Array.from(dotsContainer.children).forEach((d,i)=>d.classList.toggle('active',i===idx));
}
setInterval(()=>{ idx=(idx+1)%slides.children.length; updateHero(); },4000);

// Category navigation
document.getElementById('categoryNav').addEventListener('click',(ev)=>{
  if(ev.target.tagName==='BUTTON'){
    const cat=ev.target.getAttribute('data-cat');
    document.querySelectorAll('.category-nav button').forEach(b=>b.classList.remove('active'));
    ev.target.classList.add('active');
    ['main','drinks','desserts'].forEach(c=>{
      document.getElementById('section-'+c).classList.toggle('active',c===cat);
    });
  }
});

// Menu & Cart
function currency(v){ return 'Ksh '+v; }
function getCart(){ return JSON.parse(localStorage.getItem(currentUsername+'_cart')||'[]'); }
function saveCart(cart){ localStorage.setItem(currentUsername+'_cart', JSON.stringify(cart)); window.dispatchEvent(new Event('cart_updated')); }
function clearCart(){ localStorage.removeItem(currentUsername+'_cart'); }

function renderCart(){
  const cartList=document.getElementById('cartList');
  const count=document.getElementById('cartCount');
  const totalEl=document.getElementById('cartTotal');
  const cart=getCart(); cartList.innerHTML=''; let total=0,itemsCount=0;
  cart.forEach(c=>{
    const div=document.createElement('div'); div.className='cart-item';
    div.innerHTML=`<img src="${c.img}"><div class="meta"><h5>${c.name}</h5><p>Qty: ${c.qty} ‚Ä¢ ${currency(c.price)}</p></div>
    <div style="display:flex;flex-direction:column;gap:6px"><button onclick="inc(${c.id})">+</button><button onclick="dec(${c.id})">-</button></div>`;
    cartList.appendChild(div); total+=c.qty*c.price; itemsCount+=c.qty;
  });
  count.textContent=itemsCount;
  totalEl.textContent=currency(total);
}

function inc(id){ const cart=getCart(); const f=cart.find(c=>c.id===id); if(f){ f.qty++; saveCart(cart); renderCart(); } }
function dec(id){ const cart=getCart(); const f=cart.find(c=>c.id===id); if(f){ f.qty--; if(f.qty<=0){ const idx=cart.indexOf(f); cart.splice(idx,1);} saveCart(cart); renderCart(); } }

window.addEventListener('cart_updated', renderCart);
renderCart();

document.getElementById('cartFloat').onclick=()=>{ document.getElementById('cartPanel').classList.toggle('open'); }
document.getElementById('clearCartBtn').onclick=()=>{ if(confirm('Clear cart?')){ clearCart(); renderCart(); } }

document.getElementById('placeOrderBtn').onclick=()=>{
  const cart=getCart(); 
  if(cart.length===0){ alert('Cart empty'); return; }
  let history = JSON.parse(localStorage.getItem(currentUsername+"_cart_history") || "[]");
  history = history.concat(cart);
  localStorage.setItem(currentUsername+"_cart_history", JSON.stringify(history));
  const totalPoints=cart.reduce((sum,i)=>sum+i.qty*10,0);
  addPoints(totalPoints);
  alert(`Order placed! You earned ${totalPoints} points.`);
  clearCart(); renderCart();
};

// Sample menu items
const MENU = [
  {id:1,name:"Grilled Chicken",price:450,img:"https://images.unsplash.com/photo-1604909053198-f9d782c94bdd?auto=format&fit=crop&w=600&q=80",category:"main"},
  {id:2,name:"Beef Steak",price:550,img:"https://images.unsplash.com/photo-1606312619111-ef3b3cbfc89c?auto=format&fit=crop&w=600&q=80",category:"main"},
  {id:3,name:"Vegetable Pasta",price:350,img:"https://images.unsplash.com/photo-1606755962774-6c72fcd69e6c?auto=format&fit=crop&w=600&q=80",category:"main"},
  {id:4,name:"Fish & Chips",price:400,img:"https://images.unsplash.com/photo-1600891964599-f61ba0e24092?auto=format&fit=crop&w=600&q=80",category:"main"},
  {id:5,name:"Caesar Salad",price:300,img:"https://images.unsplash.com/photo-1605478860119-df3b2cf6fa07?auto=format&fit=crop&w=600&q=80",category:"main"},
  {id:6,name:"Coke",price:80,img:"https://images.unsplash.com/photo-1617196034715-df0b7ccba0d6?auto=format&fit=crop&w=600&q=80",category:"drinks"},
  {id:7,name:"Orange Juice",price:120,img:"https://images.unsplash.com/photo-1583454110550-4d6b1eec9180?auto=format&fit=crop&w=600&q=80",category:"drinks"},
  {id:8,name:"Lemonade",price:100,img:"https://images.unsplash.com/photo-1589308078057-1d7aa7f31d78?auto=format&fit=crop&w=600&q=80",category:"drinks"},
  {id:9,name:"Chocolate Cake",price:250,img:"https://images.unsplash.com/photo-1600181954436-c42a29034b0e?auto=format&fit=crop&w=600&q=80",category:"desserts"},
  {id:10,name:"Ice Cream Sundae",price:200,img:"https://images.unsplash.com/photo-1578985545062-69928b1d9587?auto=format&fit=crop&w=600&q=80",category:"desserts"},
  {id:11,name:"Fruit Tart",price:220,img:"https://images.unsplash.com/photo-1599785209707-d6c4808c8a5e?auto=format&fit=crop&w=600&q=80",category:"desserts"}
];

const populate=()=>{
  const main=document.getElementById('cat-main');
  const drinks=document.getElementById('cat-drinks');
  const dessert=document.getElementById('cat-dessert');
  [main,drinks,dessert].forEach(c=>c.innerHTML='');
  MENU.forEach(item=>{
    const el=document.createElement('div'); el.className='menu-card';
    el.innerHTML=`
      <img src="${item.img}" alt="${item.name}">
      <div class="card-info"><h4>${item.name}</h4><p>${currency(item.price)}</p></div>
      <div class="card-actions"><input type="number" value="1" min="1" id="qty_${item.id}"><button data-id="${item.id}">Add</button></div>`;
    if(item.category==='main') main.appendChild(el);
    if(item.category==='drinks') drinks.appendChild(el);
    if(item.category==='desserts') dessert.appendChild(el);
    el.querySelector('button').onclick=()=>{
      const q=parseInt(document.getElementById('qty_'+item.id).value||1);
      const cart=getCart(); const f=cart.find(c=>c.id===item.id);
      if(f) f.qty+=q; else cart.push({id:item.id,name:item.name,price:item.price,img:item.img,qty:q});
      saveCart(cart); alert(`${item.name} x${q} added`);
    };
  });
};
populate();
</script>
</body>
</html>

